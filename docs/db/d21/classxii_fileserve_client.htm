<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XIIEngine: xiiFileserveClient Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../XII-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XIIEngine
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.htm','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('db/d21/classxii_fileserve_client.htm','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../db/daf/classxii_fileserve_client-members.htm">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">xiiFileserveClient Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Singleton that represents the client side part of a fileserve connection.  
 <a href="../../db/d21/classxii_fileserve_client.htm#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d8/dc1/_fileserve_client_8h_source.htm">FileserveClient.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adcbd65ebaacb749a9e333b13de785a0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/dad/structxii_result.htm">xiiResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#adcbd65ebaacb749a9e333b13de785a0a">SearchForServerAddress</a> (<a class="el" href="../../d7/dc1/structxii_time.htm">xiiTime</a> timeout=<a class="el" href="../../d7/dc1/structxii_time.htm#a0d30e51875577941d5f0e312d7041c76">xiiTime::Seconds</a>(5))</td></tr>
<tr class="memdesc:adcbd65ebaacb749a9e333b13de785a0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can be called at startup to go through multiple sources and search for a valid server address.  <a href="../../db/d21/classxii_fileserve_client.htm#adcbd65ebaacb749a9e333b13de785a0a">More...</a><br /></td></tr>
<tr class="separator:adcbd65ebaacb749a9e333b13de785a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9f41d6e31057c1ef14b6092d43bc90a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/dad/structxii_result.htm">xiiResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#aa9f41d6e31057c1ef14b6092d43bc90a">WaitForServerInfo</a> (<a class="el" href="../../d7/dc1/structxii_time.htm">xiiTime</a> timeout=<a class="el" href="../../d7/dc1/structxii_time.htm#a0d30e51875577941d5f0e312d7041c76">xiiTime::Seconds</a>(60.0 *5))</td></tr>
<tr class="memdesc:aa9f41d6e31057c1ef14b6092d43bc90a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a Fileserver application to try to connect to this device and send its own information.  <a href="../../db/d21/classxii_fileserve_client.htm#aa9f41d6e31057c1ef14b6092d43bc90a">More...</a><br /></td></tr>
<tr class="separator:aa9f41d6e31057c1ef14b6092d43bc90a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0858702c9ef4c2c4fe2e1139b628375f"><td class="memItemLeft" align="right" valign="top"><a id="a0858702c9ef4c2c4fe2e1139b628375f"></a>
<a class="el" href="../../dd/dad/structxii_result.htm">xiiResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#a0858702c9ef4c2c4fe2e1139b628375f">SaveCurrentConnectionInfoToDisk</a> () const</td></tr>
<tr class="memdesc:a0858702c9ef4c2c4fe2e1139b628375f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the current connection info to a text file in the user data folder. <br /></td></tr>
<tr class="separator:a0858702c9ef4c2c4fe2e1139b628375f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45a8b2e960007362ac89c03f7204090b"><td class="memItemLeft" align="right" valign="top"><a id="a45a8b2e960007362ac89c03f7204090b"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#a45a8b2e960007362ac89c03f7204090b">GetServerConnectionAddress</a> ()</td></tr>
<tr class="memdesc:a45a8b2e960007362ac89c03f7204090b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the address through which the Fileserve client tried to connect with the server last. <br /></td></tr>
<tr class="separator:a45a8b2e960007362ac89c03f7204090b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fee6763358b5a6b164585b1ed6a0d59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/dad/structxii_result.htm">xiiResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#a2fee6763358b5a6b164585b1ed6a0d59">EnsureConnected</a> (<a class="el" href="../../d7/dc1/structxii_time.htm">xiiTime</a> timeout=<a class="el" href="../../d7/dc1/structxii_time.htm#a0d30e51875577941d5f0e312d7041c76">xiiTime::Seconds</a>(-5))</td></tr>
<tr class="memdesc:a2fee6763358b5a6b164585b1ed6a0d59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can be called to ensure a fileserve connection. Otherwise automatically called when a data directory is mounted.  <a href="../../db/d21/classxii_fileserve_client.htm#a2fee6763358b5a6b164585b1ed6a0d59">More...</a><br /></td></tr>
<tr class="separator:a2fee6763358b5a6b164585b1ed6a0d59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a835c8c64368d28e04ec053c865b25bd4"><td class="memItemLeft" align="right" valign="top"><a id="a835c8c64368d28e04ec053c865b25bd4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#a835c8c64368d28e04ec053c865b25bd4">UpdateClient</a> ()</td></tr>
<tr class="memdesc:a835c8c64368d28e04ec053c865b25bd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Needs to be called regularly to update the network. By default this is automatically called when the global event 'GameApp_UpdatePlugins' is fired, which is done by <a class="el" href="../../d1/ded/classxii_game_application.htm" title="The base class for all typical game applications made with xiiEngine.">xiiGameApplication</a>. <br /></td></tr>
<tr class="separator:a835c8c64368d28e04ec053c865b25bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a074d76ed0aa56fad7bd54171b4b2a8c0"><td class="memItemLeft" align="right" valign="top"><a id="a074d76ed0aa56fad7bd54171b4b2a8c0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#a074d76ed0aa56fad7bd54171b4b2a8c0">AddServerAddressToTry</a> (<a class="el" href="../../da/d9d/structxii_string_view.htm">xiiStringView</a> sAddress)</td></tr>
<tr class="memdesc:a074d76ed0aa56fad7bd54171b4b2a8c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an address that should be tried for connecting with the server. <br /></td></tr>
<tr class="separator:a074d76ed0aa56fad7bd54171b4b2a8c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7cdd787351ac8f30e2ea04fd2a85c8ca"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d21/classxii_fileserve_client.htm#a7cdd787351ac8f30e2ea04fd2a85c8ca">DisabledFileserveClient</a> ()</td></tr>
<tr class="memdesc:a7cdd787351ac8f30e2ea04fd2a85c8ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows to disable the file serving functionality. Should be called before mounting data directories.  <a href="../../db/d21/classxii_fileserve_client.htm#a7cdd787351ac8f30e2ea04fd2a85c8ca">More...</a><br /></td></tr>
<tr class="separator:a7cdd787351ac8f30e2ea04fd2a85c8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a6184d8ae95c144514021f64f10e51236"><td class="memItemLeft" align="right" valign="top"><a id="a6184d8ae95c144514021f64f10e51236"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>xiiDataDirectory::FileserveType</b></td></tr>
<tr class="separator:a6184d8ae95c144514021f64f10e51236"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Singleton that represents the client side part of a fileserve connection. </p>
<p>Whether the fileserve plugin will be enabled is controled by xiiFileserveClient::s_bEnableFileserve By default this is on, but if switched off, the fileserve client functionality will be disabled. <a class="el" href="../../db/d21/classxii_fileserve_client.htm" title="Singleton that represents the client side part of a fileserve connection.">xiiFileserveClient</a> will also switch its functionality off, if the command line argument "-fs_off" is specified. If a program knows that it always wants to switch file serving off, it should either simply not load the plugin at all, or it can inject that command line argument through <a class="el" href="../../d0/d67/classxii_command_line_utils.htm" title="This is a helper class to parse command lines.">xiiCommandLineUtils</a>. This should be done before application startup and especially before any data directories get mounted.</p>
<p>The timeout for connecting to the server can be configured through the command line option "-fs_timeout seconds" The server to connect to can be configured through command line option "-fs_server address". The default address is "localhost:1042". </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a7cdd787351ac8f30e2ea04fd2a85c8ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cdd787351ac8f30e2ea04fd2a85c8ca">&#9670;&nbsp;</a></span>DisabledFileserveClient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void xiiFileserveClient::DisabledFileserveClient </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows to disable the file serving functionality. Should be called before mounting data directories. </p>
<p>Also achieved through the command line argument "-fs_off" </p>

</div>
</div>
<a id="a2fee6763358b5a6b164585b1ed6a0d59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fee6763358b5a6b164585b1ed6a0d59">&#9670;&nbsp;</a></span>EnsureConnected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/dad/structxii_result.htm">xiiResult</a> xiiFileserveClient::EnsureConnected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/dc1/structxii_time.htm">xiiTime</a>&#160;</td>
          <td class="paramname"><em>timeout</em> = <code><a class="el" href="../../d7/dc1/structxii_time.htm#a0d30e51875577941d5f0e312d7041c76">xiiTime::Seconds</a>(-5)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can be called to ensure a fileserve connection. Otherwise automatically called when a data directory is mounted. </p>
<p>The timeout defines how long the code will wait for a connection. Positive numbers are a regular timeout. A zero timeout means the application will wait indefinitely. A negative number means to either wait that time, or whatever was specified through the command-line. The timeout can be specified with the command line switch "-fs_timeout X" (in seconds). </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.htm#_todo000117">Todo:</a></b></dt><dd>Somehow abstract this away ? </dd></dl>

</div>
</div>
<a id="adcbd65ebaacb749a9e333b13de785a0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcbd65ebaacb749a9e333b13de785a0a">&#9670;&nbsp;</a></span>SearchForServerAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/dad/structxii_result.htm">xiiResult</a> xiiFileserveClient::SearchForServerAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/dc1/structxii_time.htm">xiiTime</a>&#160;</td>
          <td class="paramname"><em>timeout</em> = <code><a class="el" href="../../d7/dc1/structxii_time.htm#a0d30e51875577941d5f0e312d7041c76">xiiTime::Seconds</a>(5)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Can be called at startup to go through multiple sources and search for a valid server address. </p>
<p>Ie. checks the command line, xiiFileserve.txt in different directories, etc. For every potential IP it checks whether a fileserve connection could be established (e.g. tries to connect and checks whether the server answers). If a valid connection is found, the IP is stored internally and XII_SUCCESS is returned. Call <a class="el" href="../../db/d21/classxii_fileserve_client.htm#a45a8b2e960007362ac89c03f7204090b" title="Returns the address through which the Fileserve client tried to connect with the server last.">GetServerConnectionAddress()</a> to retrieve the address.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Specifies the timeout for checking whether a server can be reached. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa9f41d6e31057c1ef14b6092d43bc90a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9f41d6e31057c1ef14b6092d43bc90a">&#9670;&nbsp;</a></span>WaitForServerInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/dad/structxii_result.htm">xiiResult</a> xiiFileserveClient::WaitForServerInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/dc1/structxii_time.htm">xiiTime</a>&#160;</td>
          <td class="paramname"><em>timeout</em> = <code><a class="el" href="../../d7/dc1/structxii_time.htm#a0d30e51875577941d5f0e312d7041c76">xiiTime::Seconds</a>(60.0&#160;*&#160;5)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for a Fileserver application to try to connect to this device and send its own information. </p>
<p>This can be used when a device has no proper way to know the IP through which to connect to a Fileserver. Instead the device opens a server connection itself, and waits for the other side to try to connect to it. This typically means that a human has to manually input this device's IP on the host PC into the Fileserve application, thus enabling the exchange of connection information. Once this has happened, this function stores the valid server IP internally and returns with success. A subsequent call to <a class="el" href="../../db/d21/classxii_fileserve_client.htm#a2fee6763358b5a6b164585b1ed6a0d59" title="Can be called to ensure a fileserve connection. Otherwise automatically called when a data directory ...">EnsureConnected()</a> should then succeed. </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.htm#_todo000119">Todo:</a></b></dt><dd>Abstract this somehow ? </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/XII/XII/Source/EnginePlugins/FileservePlugin/Client/<a class="el" href="../../d8/dc1/_fileserve_client_8h_source.htm">FileserveClient.h</a></li>
<li>/home/runner/work/XII/XII/Source/EnginePlugins/FileservePlugin/Client/FileserveClient.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../db/d21/classxii_fileserve_client.htm">xiiFileserveClient</a></li>
    <li class="footer">Generated on Sun Dec 10 2023 03:58:35 for XIIEngine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
